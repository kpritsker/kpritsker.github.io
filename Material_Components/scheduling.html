<!DOCTYPE html>
<html class="mdc-typography">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Scheduling Table</title>
    <!--<link rel="stylesheet" href="/node_modules/material-components-web/dist/material-components-web.css">-->
    <link rel="stylesheet" href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css">
    <!--<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <!--<script src="/node_modules/material-components-web/dist/material-components-web.js"></script>-->
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous"></script>

    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <style>
        :root {
            --mdc-theme-primary: #0288D1;
            --mdc-theme-text-primary-on-primary: var(--mdc-theme-text-primary-on-dark);
            --mdc-theme-secondary: #FF9800;
        }

        .cards {
            display: flex;
            flex-wrap: wrap;
        }

        .mdc-toolbar__row:first-child::after {
            background-image: url("assets/Jellyfish.jpg");
            background-size: cover;
            background-position: center;
        }

        /* Ensure layout covers the entire screen. */

        html {
            height: 100%;
        }

        /* Place drawer and content side by side. */

        .body {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
            height: 100%;
            width: 100%;
        }

        /* Stack toolbar and main on top of each other. */

        .main {
            padding-left: 16px;
            padding-right: 16px;
        }

        table {
            border-collapse: collapse;
            border-radius: 15px;
            border-style: hidden;
            /*box-shadow: 0 0 0 1px;*/
        }

        tr {
            border-bottom: 1.5px solid rgba(189, 189, 189, 0.6);
            position: relative;
        }

        th,
        td {
            padding: 15px;
        }

        th {
            text-align: left;
        }

        .delete {
            min-width: 0;
            font-size: 18px;
        }

        .mdc-menu-anchor {
            margin: 16px;
        }

        #sticky-element.sticky {
            position: fixed;
            bottom: 1.5rem;
        }

        #sticky-button.sticky {
            --mdc-button: --mdc-button--raised;
        }
    </style>
</head>

<body class="body">

    <header class="mdc-toolbar 
        mdc-toolbar--fixed 
        mdc-toolbar--waterfall 
        mdc-toolbar--flexible mdc-toolbar--flexible-default-behavior mdc-toolbar--flexible-space-maximized">
        <div class="mdc-toolbar__row" style="height: 224px;">
            <section class="mdc-toolbar__section mdc-toolbar__section--align-start">
                <a href="#" class="menu material-icons mdc-toolbar__menu-icon">menu</a>
                <span class="mdc-toolbar__title" style="font-size: 2.125rem;">Scheduling</span>
            </section>
            <section class="mdc-toolbar__section mdc-toolbar__section--align-end">
                <div class="mdc-menu-anchor">
                    <a href="#" class="mdc-toolbar__menu-icon toggle" style="padding:0">
                        <i class="mdc-ripple-surface material-icons search align-icons" data-mdc-ripple-is-unbounded aria-label="More" data-mdc-auto-init="MDCRipple">more_vert</i>
                    </a>

                    <div class="mdc-simple-menu mdc-simple-menu--open-from-top-right" tabindex="-1" id="demo-menu">
                        <ul class="mdc-simple-menu__items mdc-list" role="menu" aria-hidden="true">
                            <li class="mdc-list-item" role="menuitem" tabindex="0">Back</li>
                            <li class="mdc-list-item" role="menuitem" tabindex="0">Forward</li>
                            <li class="mdc-list-item" role="menuitem" tabindex="0">Reload</li>
                            <li class="mdc-list-divider" role="separator"></li>

                            <li class="mdc-list-item" role="menuitem" tabindex="0">Save As...</li>
                        </ul>
                    </div>
                </div>

            </section>
        </div>
    </header>

    <aside class="mdc-temporary-drawer">
        <nav class="mdc-temporary-drawer__drawer">
            <header class="mdc-temporary-drawer__header">
                <div class="mdc-temporary-drawer__header-content mdc-theme--primary-bg mdc-theme--text-primary-on-primary">
                    Demo Menu
                </div>
            </header>
            <nav class="mdc-temporary-drawer__content mdc-list-group">
                <div id="icon-with-text-demo" class="mdc-list">
                    <a class="mdc-list-item mdc-temporary-drawer--selected" data-mdc-auto-init="MDCRipple" href="#">
                        <i class="material-icons mdc-list-item__start-detail" aria-hidden="true">inbox</i>Inbox
                    </a>
                    <a class="mdc-list-item" data-mdc-auto-init="MDCRipple" href="#">
                        <i class="material-icons mdc-list-item__start-detail" aria-hidden="true">star</i>Star
                    </a>
                    <a class="mdc-list-item" data-mdc-auto-init="MDCRipple" href="#">
                        <i class="material-icons mdc-list-item__start-detail" aria-hidden="true">send</i>Sent Mail
                    </a>
                    <a class="mdc-list-item" data-mdc-auto-init="MDCRipple" href="#">
                        <i class="material-icons mdc-list-item__start-detail" aria-hidden="true">drafts</i>Drafts
                    </a>
                </div>

                <hr class="mdc-list-divider">

                <div class="mdc-list">
                    <a class="mdc-list-item" data-mdc-auto-init="MDCRipple" href="#">
                        <i class="material-icons mdc-list-item__start-detail" aria-hidden="true">email</i>All Mail
                    </a>
                    <a class="mdc-list-item" data-mdc-auto-init="MDCRipple" href="#">
                        <i class="material-icons mdc-list-item__start-detail" aria-hidden="true">delete</i>Trash
                    </a>
                    <a class="mdc-list-item" data-mdc-auto-init="MDCRipple" href="#">
                        <i class="material-icons mdc-list-item__start-detail" aria-hidden="true">report</i>Spam
                    </a>
                </div>
            </nav>
        </nav>
    </aside>

    <main class="mdc-toolbar-fixed-adjust main">

        <div class="mdc-layout-grid">
            <div class="mdc-layout-grid__inner">
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12" style="margin: auto">
                    <!--Scheduling table card-->
                    <div class="mdc-card table-card" align="center">
                        <section class="mdc-card__media mdc-theme--primary mdc-theme--primary-bg">
                            <h1 class="mdc-card__title mdc-card__title--large mdc-theme--text-primary-on-primary">Scheduling Table</h1>
                            <h2 class="mdc-card__subtitle mdc-theme--text-primary-on-primary">Input start and stop times</h2>
                        </section>
                        <section class="mdc-card__supporting-text" style="padding: 8px 0px">
                            <!--Scheduling Table-->
                            <table class="my-table" id="my-table">
                                <tr id="row0">
                                    <th></th>
                                    <th style="border-radius: 15px 0 0 0;">Start</th>
                                    <th style="border-radius: 0 15px 0 0;">Stop</th>
                                </tr>
                                <tr id="row1">
                                    <td>
                                        <button href="#" class="delete material-icons mdc-button mdc-button--compact mdc-button--dense mdc-typography--button" data-mdc-auto-init="MDCRipple"
                                            disabled>
                                            delete
                                        </button>
                                    </td>
                                    <td style="border-radius: 0 0 0 15px;">
                                        <div class="mdc-textfield">
                                            <input type="text" id="start1" class="mdc-textfield__input">
                                        </div>
                                    </td>
                                    <td style="border-radius: 0 0 15px 0;">
                                        <div class="mdc-textfield">
                                            <input type="text" id="stop1" class="mdc-textfield__input">
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </section>
                        <section class="mdc-card__actions">
                            <div id="sticky-element">
                                <button class="mdc-button 
                                mdc-button--primary 
                                mdc-button--compact 
                                mdc-typography--button 
                                mdc-card__action" data-mdc-auto-init="MDCRipple" id="sticky-button1">
                                    Save
                                </button>
                                <button class="mdc-button
                                mdc-button--primary 
                                mdc-button--compact 
                                mdc-typography--button
                                mdc-card__action" data-mdc-auto-init="MDCRipple" id="sticky-button2">
                                    Cancel
                                </button>
                            </div>
                            &nbsp
                            <div id="sticky-anchor"></div>
                        </section>
                    </div>
                </div>
            </div>
        </div>
    </main>


    <script>
        window.mdc.autoInit();


        var toolbar = mdc.toolbar.MDCToolbar.attachTo(document.querySelector('.mdc-toolbar'));
        toolbar.fixedAdjustElement = document.querySelector('.mdc-toolbar-fixed-adjust');


        var drawerEl = document.querySelector('.mdc-temporary-drawer');
        var MDCTemporaryDrawer = mdc.drawer.MDCTemporaryDrawer;
        var drawer = new MDCTemporaryDrawer(drawerEl);
        document.querySelector('.menu').addEventListener('click', function () {
            drawer.open = true;
        });
        drawerEl.addEventListener('MDCTemporaryDrawer:open', function () {
            console.log('Received MDCTemporaryDrawer:open');
        });
        drawerEl.addEventListener('MDCTemporaryDrawer:close', function () {
            console.log('Received MDCTemporaryDrawer:close');
        });


        //Scripts for table function

        // Find a <table> element with id="myTable":
        var table = document.getElementById("my-table");

        table.rows[1].addEventListener('input', AddRow);
        table.rows[1].cells[0].querySelector('button').addEventListener('click', function () {
            if (table.rows.length > 2) {
                table.deleteRow(table.rows[1].rowIndex);
            }
        });
        table.rows[1].cells[0].querySelector('button').addEventListener('click', StickyRelocate);

        function AddRow() {
            if ($(this).closest('tr').is(':last-child')) {

                // Create an empty <tr> element and add it to the 1st position of the table:
                var row = table.insertRow();
                //$(row).hide();

                // Insert new cells (<td> elements) at the 1st and 2nd position of the "new" <tr> element:
                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
                var cell3 = row.insertCell(2);

                // Add some text to the new cells:
                cell1.innerHTML = '<button href="#" class="delete material-icons mdc-button mdc-button--compact mdc-button--dense mdc-typography--button">delete</button>';
                cell1.querySelector('button').addEventListener('click', function () {
                    if (table.rows.length > 2) {
                        table.deleteRow(row.rowIndex);
                    }
                    if (table.rows.length == 2) {
                        table.rows[1].cells[0].querySelector('button').disabled = true;
                    }
                });
                cell1.querySelector('button').addEventListener('click', StickyRelocate);
                cell2.innerHTML = '<div class="mdc-textfield"><input type="text" class="mdc-textfield__input"></div>';
                cell3.innerHTML = '<div class="mdc-textfield"><input type="text" class="mdc-textfield__input"></div>';

                //enable first row delete button
                table.rows[1].cells[0].querySelector('button').disabled = false;

                // Create new event listeners
                row.addEventListener('input', AddRow);

                // $(row).show("slide", {direction: "up"}, 1000);
                //$(row).animate({height: 'show'});
                //$(row).slideDown("slow");
            }
        }


        //toggle more menu
        var menuEl = document.querySelector('#demo-menu');
        var menu = new mdc.menu.MDCSimpleMenu(menuEl);
        var toggle = document.querySelector('.toggle');
        toggle.addEventListener('click', function () {
            menu.open = !menu.open;
        });


        function StickyRelocate() {
            var window_bottom = $(window).scrollTop() + $(window).height();
            var div_bottom = $('#sticky-anchor').offset().top + $('#sticky-anchor').height();
            if (window_bottom < div_bottom) {
                $('#sticky-element').addClass('sticky');
                $('#sticky-button1').addClass('mdc-button--raised');
                $('#sticky-button2').addClass('mdc-button--raised');
            }
            else {
                $('#sticky-element').removeClass('sticky');
                $('#sticky-button1').removeClass('mdc-button--raised');
                $('#sticky-button2').removeClass('mdc-button--raised');
            };
        }

        $(function () {
            $(window).scroll(StickyRelocate);
            $(table).on("input", "input", StickyRelocate);
            StickyRelocate();
        });
    </script>
</body>

</html>